services:
  # ============================
  # BACKEND (FLASK)
  # ============================
  - name: adoodle-backend
    type: web
    runtime: python
    repo: https://github.com/chaitanya-encegen/adoodle-software
    rootDir: Backend
    buildCommand: pip install -r requirements.txt
    startCommand: gunicorn app:app --bind 0.0.0.0:$PORT --workers 3

    envVars:
      - key: RENDER
        value: "true"
      - key: JWT_SECRET
        value: "change-this-to-strong-secret"
      - key: SUPER_ADMIN_EMAIL
        value: "admin@example.com"
      - key: SUPER_ADMIN_PW
        value: "admin123"

    disk:
      name: backend_disk
      mountPath: /opt/render/project/data
      sizeGB: 5

  # ============================
  # FRONTEND (VITE)
  # ============================
  - name: adoodle-frontend
    type: web
    runtime: static
    repo: https://github.com/chaitanya-encegen/adoodle-software
    rootDir: Frontend
    buildCommand: npm install && npm run build
    staticPublishPath: dist

    envVars:
      - key: VITE_API_BASE
        value: "https://adoddle-backend.onrender.com"
